<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACC Project - Thomas Tran</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
            color: #d1d5db;
        }
        .content-section {
            background-color: #1f2937;
            border: 1px solid #374151;
        }
        .code-block {
            background-color: #0d1117;
            border: 1px solid #30363d;
        }
        .btn {
            transition: background-color 0.3s ease, transform 0.3s ease;
        }
        .btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12">

        <!-- Project Header -->
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-white">Model-Based Adaptive Cruise Control & Autonomous Steering</h1>
            <p class="mt-2 text-lg text-sky-300">A Simulink-based vehicle control system for the NXP S32K144.</p>
        </header>

        <div class="space-y-12">

            <!-- Project Overview -->
            <section class="content-section p-6 rounded-lg">
                <h2 class="text-3xl font-bold mb-4 text-white">Project Overview</h2>
                <div class="md:flex md:space-x-8 items-center">
                    <div class="md:w-2/3 text-lg leading-relaxed">
                        <p>This project involved the design and implementation of a sophisticated Adaptive Cruise Control (ACC) and autonomous steering system for a simulated vehicle. Using MATLAB/Simulink for model-based design, the system was deployed on an NXP S32K144 microcontroller.</p>
                        <p class="mt-4">The core of the project was to create a multi-mode control system that could maintain a set speed, adapt to traffic by maintaining a safe following distance, and autonomously steer the vehicle along a predefined course. The system integrated hardware I/O, CAN bus communication for vehicle-to-vehicle data, and a haptic steering wheel for realistic force feedback.</p>
                    </div>
                    <div class="md:w-1/3 mt-6 md:mt-0">
                        <img src="assets/images/461-car.png" alt="ACC System Diagram" class="rounded-lg shadow-lg w-full">
                    </div>
                </div>
            </section>

            <!-- Key Features -->
            <section class="content-section p-6 rounded-lg">
                <h2 class="text-3xl font-bold mb-6 text-white">Key Features</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                    <div class="feature-item">
                        <i class="fas fa-cogs fa-3x text-sky-400 mb-3"></i>
                        <h3 class="text-xl font-semibold text-white">Multi-Mode Control</h3>
                        <p>Stateflow logic switches between manual, speed control, and position control modes.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-network-wired fa-3x text-sky-400 mb-3"></i>
                        <h3 class="text-xl font-semibold text-white">CAN Bus Integration</h3>
                        <p>Processes data from up to six other vehicles to identify the lead car for adaptive control.</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-car fa-3x text-sky-400 mb-3"></i>
                        <h3 class="text-xl font-semibold text-white">Autonomous Steering</h3>
                        <p>A tuned PD controller provides stable lane-keeping at speeds up to 30 m/s with haptic feedback.</p>
                    </div>
                </div>
            </section>

            <!-- Technical Implementation -->
            <section class="content-section p-6 rounded-lg">
                <h2 class="text-3xl font-bold mb-4 text-white">Technical Implementation</h2>
                <div class="space-y-6 text-lg">
                    <div>
                        <h3 class="text-2xl font-semibold text-sky-300 mb-2">Simulink Modeling & Vehicle Dynamics</h3>
                        <p>The vehicle's motion was modeled using a bicycle model, with differential equations implemented in a Simulink S-Function to describe the longitudinal and lateral dynamics. The model took throttle inputs and steering angle to calculate the vehicle's position (x, y) and heading (Ïˆ) in a global coordinate system.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-semibold text-sky-300 mb-2">Lead Vehicle Detection</h3>
                        <p>A critical component of the ACC system is the "Pick Lead Logic." I developed a C-based S-Function that takes an array of s-coordinates (distance along the road) for all vehicles on the CAN bus. The function iterates through these vehicles, compares their position to our own, and identifies the closest vehicle that is geometrically ahead. This logic outputs the lead vehicle's s-coordinate and speed, which is fed into the ACC's state machine.</p>
                    </div>
                    <div>
                        <h3 class="text-2xl font-semibold text-sky-300 mb-2">PD Controller for Autonomous Steering</h3>
                        <p>The automatic steering was achieved using a Proportional-Derivative (PD) controller. The error signal for the controller was the vehicle's lateral deviation ('n' coordinate) from the center of the road. The PD controller was tuned to provide stable lane-keeping with minimal overshoot and steady-state error, even at high speeds, and actuated the haptic wheel to provide realistic steering feedback to the user.</p>
                    </div>
                </div>
            </section>
            
            <!-- Code Snippet Section -->
            <section class="content-section p-6 rounded-lg">
                <h2 class="text-3xl font-bold mb-4 text-white">Code Snippet</h2>
                <p class="mb-3 text-lg">Below is a C code snippet from the "pick_lead" S-Function, which is responsible for identifying the lead vehicle from the CAN bus data.</p>
                <div class="code-block rounded-lg overflow-hidden">
                    <pre class="p-4 text-sm text-gray-300 overflow-x-auto"><code class="language-c">
/* S-Function: pick_lead_outputs_wrapper */

void pick_lead_Outputs_wrapper(const real32_T *car_dist,
                                 real32_T *distance,
                                 int32_T *index,
                                 boolean_T *no_lead)
{
    float min_dist_ahead = 1e9; // Initialize with a very large number
    int lead_idx = -1; // -1 indicates no lead vehicle found
    
    // car_dist[0] is our own car's s-coordinate
    float my_s = car_dist[0];

    // Iterate through the other 6 cars
    for (int i = 1; i <= 6; i++) {
        float other_s = car_dist[i];
        
        // Check if the other car is ahead of us
        if (other_s > my_s) {
            float dist_ahead = other_s - my_s;
            
            // If this car is closer than the current lead, update
            if (dist_ahead < min_dist_ahead) {
                min_dist_ahead = dist_ahead;
                lead_idx = i;
            }
        }
    }

    if (lead_idx != -1) {
        // A lead vehicle was found
        *distance = car_dist[lead_idx]; // Output the s-coordinate of the lead car
        *index = lead_idx;              // Output the index of the lead car
        *no_lead = 0;                   // Set no_lead flag to false
    } else {
        // No lead vehicle found
        *distance = my_s;   // Output our own distance as a fallback
        *index = 0;         // Output our own index
        *no_lead = 1;       // Set no_lead flag to true
    }
}
                    </code></pre>
                </div>
            </section>
        </div>

        <!-- Back to Home Button -->
        <div class="text-center mt-16">
            <a href="index.html" class="btn bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-full text-lg">
                <i class="fas fa-arrow-left mr-2"></i> Back to Portfolio
            </a>
        </div>
    </main>

</body>
</html>

